(()=>{"use strict";var t="all",r="hidden",e="filter";const n=function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];switch(n){case t:case r:return{type:n,payload:{field:a[0]}};case e:return{type:n,payload:{field:a[0],filter:a[1]}};default:return{type:void 0,payload:new Error("Unknown action type"),error:!0}}},o=[{product:"phone",region:"east",sales:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"phone",region:"north",sales:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"phone",region:"south",sales:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"laptop",region:"east",sales:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"laptop",region:"north",sales:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"laptop",region:"south",sales:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"smart speaker",region:"east",sales:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"smart speaker",region:"north",sales:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"smart speaker",region:"south",sales:[10,40,10,6,5,6,8,6,6,6,7,26]}];function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function u(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?i(Object(e),!0).forEach((function(r){l(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function l(t,r,e){return(r=function(t){var r=function(t){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var f={region:["north","south","east"],product:["phone","laptop","smart speaker"]},s={type:"all",filters:u({},f),data:o};function p(t,r){return t.filter((function(t){return Object.keys(r).map((function(e){return r[e].includes(t[e])})).every(Boolean)}))}var d=function(t){var r,e=[],n=function(n){r=t(r,n),e.forEach((function(t){return t()}))},o={dispatch:n,getState:function(){return r},subscribe:function(t){return e.includes(t)||e.push(t),function(){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}}};return n({type:"MIS_INIT"}),o}((function(){var n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case t:var l=i.payload.field,d=a.filters;d[l]=f[l];var y=p(o,d);return u(u({},a),{},{filters:d,data:y});case r:var b=i.payload.field,m=a.filters;m[b]=[];var v=p(o,m);return u(u({},a),{},{filters:m,data:v});case e:var h=i.payload,g=h.field,S=h.filter,A=a.filters;A[g]=function(t){if(Array.isArray(t))return c(t)}(n=S)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,r){if(t){if("string"==typeof t)return c(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,r):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var j=p(o,A);return u(u({},a),{},{filters:A,data:j});default:return a}}));const y=d;function b(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var m=y.dispatch;const v=function(o,a,c){o.innerHTML=function(t){var r=t.label,e=t.data,n="".concat(r,": "),o='\n    <input type="checkbox" id="'.concat(r,'-all" name="').concat(r,'" value="all" checked>\n    <label for="').concat(r,'-all">All</label>\n  '),a=e.map((function(t){var e=t.value,n=t.text;return'\n    <input type="checkbox" id="'.concat(r,"-").concat(e,'" name="').concat(r,'" value="').concat(e,'" checked>\n    <label for="').concat(r,"-").concat(e,'">').concat(n,"</label>\n  ")})).join("");return"\n    ".concat(n,"\n    ").concat(o,"\n    ").concat(a,"\n  ")}(c),o.addEventListener("change",(function(c){return function(o,a,c){var i,u=function(t){if(Array.isArray(t))return t}(i=Array.from(o.querySelectorAll('input[type="checkbox"]')))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,r){if(t){if("string"==typeof t)return b(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(t,r):void 0}}(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=u[0],f=b(u).slice(1);if(c.target.value.includes("all")){var s=l.checked;f.forEach((function(t){t.checked=s})),m(n(s?t:r,a))}else{var p=[];f.forEach((function(t){t.checked&&p.push(t.value)})),l.checked=f.every((function(t){return t.checked})),m(n(e,a,p))}}(o,a,c)}))};function h(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return g(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?g(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var S=y.getState;function A(t){var r=t.product,e=t.region,n=t.sales,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=0===o?"":'<td rowspan="'.concat(o,'">').concat(r,"</td>"),c="<td>".concat(e,"</td>"),i=n.map((function(t){return'<td contenteditable class="right">'.concat(t.toString(10).padStart(3),"</td>")})).join("");return"\n    <tr>\n      ".concat(a,"\n      ").concat(c,"\n      ").concat(i,"\n    </tr>\n  ")}const j=function(t){var r,e,n,o;t.innerHTML=(r=S().data.sort((function(t,r){if(t.product<r.product)return-1;if(t.product===r.product){if(t.region<r.region)return-1;if(t.region===r.region)return 0}return 1})),e=h(Array.from(Array.from({length:12}).keys())).map((function(t){return t+1})),n=function(t){var r=t.map((function(t){return"<th>".concat(t,"</th>")})).join("");return"\n    <tr>\n      ".concat(r,"\n    </tr>\n  ")}(["product","region"].concat(h(e))),o=r.map((function(t,r,e){if(0===r||e[r-1].product!==t.product){var n=e.reduce((function(r,e){return r+Number(t.product===e.product)}),0);return A(t,n)}return A(t,0)})).join(""),"\n    ".concat(n,"\n    ").concat(o,"\n  "))};var w=document.querySelector("#region-filter"),O=document.querySelector("#product-filter"),k=(document.querySelector("#table-wrapper"),document.querySelector("#table-wrapper table"));v(w,"region",{label:"Region",data:[{value:"north",text:"North"},{value:"south",text:"South"},{value:"east",text:"East"}]}),v(O,"product",{label:"Product",data:[{value:"phone",text:"Phone"},{value:"laptop",text:"Laptop"},{value:"smart speaker",text:"Smart Speaker"}]}),j(k),(0,y.subscribe)((function(){j(k)}))})();